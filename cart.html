<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="E-SHOP - Your premier online shopping destination">
    <meta name="keywords" content="e-commerce, shopping, products, fashion">
    <meta name="theme-color" content="#F7941D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="public/manifest.json">
    <title>Shopping Cart - E-SHOP</title>
    <link rel="icon" type="image/png" href="public/images/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="public/bootstrap.css">
    <link rel="stylesheet" href="public/font-awesome.css">
    <link rel="stylesheet" href="public/fe/themify-icons.css">
    <link rel="stylesheet" href="public/fe/style.css">
    <link rel="stylesheet" href="public/fe/responsive.css">
    <style>
        .cart-container { padding: 50px 0; min-height: 600px; }
        .cart-item { background: #fff; padding: 20px; margin-bottom: 15px; border-radius: 8px; display: flex; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .item-image { width: 100px; height: 100px; background: #f0f0f0; border-radius: 4px; margin-right: 20px; display: flex; align-items: center; justify-content: center; }
        .item-details { flex: 1; }
        .item-name { font-weight: 600; font-size: 16px; margin-bottom: 5px; }
        .item-price { color: #F7941D; font-weight: 600; }
        .item-quantity { display: flex; align-items: center; margin: 10px 0; }
        .qty-btn { background: #f0f0f0; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
        .remove-btn { background: #ff6b6b; color: #fff; border: none; padding: 8px 15px; border-radius: 3px; cursor: pointer; }
        .cart-summary { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .summary-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .summary-row.total { font-weight: 600; font-size: 18px; border-top: 2px solid #F7941D; padding: 15px 0; }
        .btn-checkout { background: #F7941D; color: #fff; padding: 15px 30px; width: 100%; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; margin-top: 20px; font-weight: 600; }
        .btn-checkout:hover { background: #e68a1a; }
        .empty-cart { text-align: center; padding: 50px 20px; }
        .empty-cart i { font-size: 60px; color: #ddd; margin-bottom: 20px; }
        .recommendations-section { background: #f9f9f9; padding: 30px; border-radius: 8px; margin-top: 40px; }
        .recommendations-section h3 { margin-bottom: 20px; color: #333; border-bottom: 2px solid #F7941D; padding-bottom: 10px; }
        .ai-badge { background: #F7941D; color: #fff; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: 600; margin-left: 10px; }
        .recommendations-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .rec-product { background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s; cursor: pointer; }
        .rec-product:hover { transform: translateY(-5px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .rec-image { width: 100%; height: 180px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #999; }
        .rec-content { padding: 15px; }
        .rec-name { font-weight: 600; font-size: 14px; margin-bottom: 8px; }
        .rec-price { color: #F7941D; font-weight: 600; margin-bottom: 5px; }
        .rec-reason { font-size: 12px; color: #666; margin-bottom: 10px; font-style: italic; }
        .rec-rating { color: #FFC107; font-size: 12px; margin-bottom: 10px; }
        .btn-rec-add { background: #F7941D; color: #fff; border: none; padding: 8px 12px; border-radius: 3px; cursor: pointer; width: 100%; font-weight: 600; font-size: 12px; }
        .btn-rec-add:hover { background: #e68a1a; }
    </style>
</head>
<body>
    <header class="header shop">
        <div class="topbar">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        <div class="left-content">
                            <ul class="list-main">
                                <li><i class="ti-location-pin"></i> <span>London Oxford Street, UK</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12">
                        <div class="right-content">
                            <ul class="list-main">
                                <li><i class="ti-location-pin"></i> <a href="track-order.html">Track Order</a></li>
                                <li><i class="ti-power-off"></i><a href="login.html">Login</a> / <a href="register.html">Register</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="middle-inner">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2 col-md-2 col-12">
                        <div class="logo">
                            <a href="index.html"><img src="public/images/logo.jpg" alt="logo"></a>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-7 col-12">
                        <div class="search-bar-top">
                            <div class="search-bar">
                                <select>
                                    <option>All Category</option>
                                    <option>Footwear</option>
                                    <option>Garments</option>
                                </select>
                                <form method="GET" action="index.html">
                                    <input name="search" placeholder="Search Products..." type="search">
                                    <button class="btnn" type="submit"><i class="ti-search"></i></button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-12">
                        <div class="right-bar">
                            <div class="sinlge-bar shopping">
                                <a href="wishlist.html" class="single-icon"><i class="fa fa-heart-o"></i> <span class="total-count" id="wishlistCount">0</span></a>
                            </div>
                            <div class="sinlge-bar shopping">
                                <a href="cart.html" class="single-icon"><i class="ti-bag"></i> <span class="total-count" id="cartCount">0</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-inner">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="menu-area">
                            <nav class="navbar navbar-expand-lg">
                                <div class="navbar-collapse">
                                    <ul class="nav main-menu navbar-nav">
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="products.html">Products</a></li>
                                        <li><a href="blog.html">Blog</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                        <li><a href="admin-dashboard.html">Admin</a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="cart-container">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-12">
                    <h2 style="margin-bottom: 30px;">Shopping Cart</h2>
                    <div id="cartItems"></div>
                    
                    <!-- AI Recommendations Section -->
                    <div class="recommendations-section" id="recommendationsSection" style="display:none;">
                        <h3><i class="fa fa-lightbulb-o"></i> AI-Powered Recommendations <span class="ai-badge">SMART</span></h3>
                        <div class="recommendations-grid" id="recommendationsContainer"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="cart-summary">
                        <h3>Order Summary</h3>
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping:</span>
                            <span id="shipping">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax (10%):</span>
                            <span id="tax">$0.00</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total:</span>
                            <span id="total">$0.00</span>
                        </div>
                        <button class="btn-checkout" onclick="proceedToCheckout()">Proceed to Checkout</button>
                        <a href="products.html" style="display: block; text-align: center; margin-top: 15px; color: #F7941D; text-decoration: none;">Continue Shopping</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer-area footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer">
                            <h4>About Us</h4>
                            <p>E-SHOP is your premier online shopping destination offering quality products at affordable prices.</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <div class="single-footer links">
                            <h4>Quick Links</h4>
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="products.html">Products</a></li>
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="contact.html">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <div class="single-footer links">
                            <h4>Support</h4>
                            <ul>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Privacy</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="single-footer">
                            <h4>Contact</h4>
                            <ul>
                                <li>London Oxford Street, UK</li>
                                <li>Email: info@eshop.com</li>
                                <li>Phone: +1-800-ESHOP</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            <div class="container">
                <p>&copy; 2025 E-SHOP. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"></script>
    <script>
        // AI Recommendation Engine
        const allProducts = [
            { id: 1, name: 'Premium Running Shoes', price: 129.99, category: 'Sports', rating: 5, tags: ['shoes', 'running', 'sports'] },
            { id: 2, name: 'Winter Jacket', price: 149.99, category: 'Fashion', rating: 4, tags: ['jacket', 'winter', 'fashion'] },
            { id: 3, name: 'Wireless Headphones', price: 199.99, category: 'Electronics', rating: 5, tags: ['headphones', 'audio', 'electronics'] },
            { id: 4, name: 'Athletic Socks (3-Pack)', price: 19.99, category: 'Accessories', rating: 4, tags: ['socks', 'athletic', 'accessories'] },
            { id: 5, name: 'Yoga Mat', price: 49.99, category: 'Sports', rating: 5, tags: ['yoga', 'mat', 'fitness'] },
            { id: 6, name: 'Smart Watch', price: 299.99, category: 'Electronics', rating: 5, tags: ['watch', 'smart', 'electronics'] },
            { id: 7, name: 'Duffel Bag', price: 89.99, category: 'Travel', rating: 4, tags: ['bag', 'travel', 'duffel'] },
            { id: 8, name: 'Compression Shorts', price: 39.99, category: 'Fashion', rating: 4, tags: ['shorts', 'compression', 'sportswear'] },
            { id: 9, name: 'LED Running Light', price: 29.99, category: 'Accessories', rating: 4, tags: ['light', 'running', 'safety'] },
            { id: 10, name: 'Protein Shaker Bottle', price: 24.99, category: 'Sports', rating: 4, tags: ['bottle', 'protein', 'fitness'] },
            { id: 11, name: 'Gym Gloves', price: 34.99, category: 'Sports', rating: 4, tags: ['gloves', 'gym', 'fitness'] },
            { id: 12, name: 'Water-Resistant Phone Case', price: 19.99, category: 'Accessories', rating: 4, tags: ['case', 'phone', 'protection'] }
        ];

        function getAIRecommendations(cart) {
            if (!cart || cart.length === 0) return [];

            const recommendations = [];
            const addedProductIds = new Set(cart.map(item => item.id));

            // AI Logic: Find products based on cart items
            cart.forEach(cartItem => {
                const product = allProducts.find(p => p.name === cartItem.name);
                if (product) {
                    // Get similar category products
                    allProducts.forEach(p => {
                        if (!addedProductIds.has(p.id) && p.category === product.category && p.id !== product.id) {
                            recommendations.push({
                                ...p,
                                reason: 'Complements your ' + product.name,
                                score: 100
                            });
                        }
                    });
                }
            });

            // Add trending products (highest rated)
            allProducts.forEach(p => {
                if (!addedProductIds.has(p.id) && p.rating === 5) {
                    if (!recommendations.find(r => r.id === p.id)) {
                        recommendations.push({
                            ...p,
                            reason: 'Trending - Highly Rated',
                            score: 80
                        });
                    }
                }
            });

            // Add complementary products
            const complementary = {
                'Running Shoes': ['Athletic Socks (3-Pack)', 'LED Running Light'],
                'Winter Jacket': ['Compression Shorts', 'Gym Gloves'],
                'Wireless Headphones': ['Smart Watch'],
                'Yoga Mat': ['Protein Shaker Bottle'],
                'Smart Watch': ['Wireless Headphones'],
                'Duffel Bag': ['Water-Resistant Phone Case']
            };

            cart.forEach(cartItem => {
                if (complementary[cartItem.name]) {
                    complementary[cartItem.name].forEach(compName => {
                        const compProduct = allProducts.find(p => p.name === compName);
                        if (compProduct && !addedProductIds.has(compProduct.id)) {
                            if (!recommendations.find(r => r.id === compProduct.id)) {
                                recommendations.push({
                                    ...compProduct,
                                    reason: 'Pairs well with ' + cartItem.name,
                                    score: 95
                                });
                            }
                        }
                    });
                }
            });

            // Sort by score and return top 4
            return recommendations
                .sort((a, b) => b.score - a.score)
                .slice(0, 4);
        }

        function displayRecommendations() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                document.getElementById('recommendationsSection').style.display = 'none';
                return;
            }

            const recommendations = getAIRecommendations(cart);
            if (recommendations.length === 0) {
                document.getElementById('recommendationsSection').style.display = 'none';
                return;
            }

            const container = document.getElementById('recommendationsContainer');
            let html = '';

            recommendations.forEach(rec => {
                html += `
                    <div class="rec-product">
                        <div class="rec-image">
                            <img src="https://via.placeholder.com/200x180/${Math.floor(Math.random()*16777215).toString(16)}/FFFFFF?text=${encodeURIComponent(rec.name)}" alt="${rec.name}" style="width:100%;height:100%;object-fit:cover;">
                        </div>
                        <div class="rec-content">
                            <div class="rec-name">${rec.name}</div>
                            <div class="rec-price">$${rec.price.toFixed(2)}</div>
                            <div class="rec-rating">${'â˜…'.repeat(rec.rating)}${'â˜†'.repeat(5-rec.rating)}</div>
                            <div class="rec-reason">ðŸ’¡ ${rec.reason}</div>
                            <button class="btn-rec-add" onclick="addRecommendedToCart('${rec.name}', ${rec.price}, '${rec.category}')">Add to Cart</button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            document.getElementById('recommendationsSection').style.display = 'block';
        }

        function addRecommendedToCart(name, price, category) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItem = cart.find(item => item.name === name);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: Date.now(), name, price, quantity: 1, category });
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
            displayRecommendations();
            alert('Added ' + name + ' to cart! ðŸŽ‰');
        }

        // Simple cart management with localStorage
        function loadCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItems = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart"><i class="ti-bag"></i><h3>Your cart is empty</h3><p>Add items to get started</p></div>';
                displayRecommendations();
                return;
            }
            
            let html = '';
            let subtotal = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                html += `
                    <div class="cart-item">
                        <div class="item-image">
                            <img src="https://via.placeholder.com/100/F7941D/FFFFFF?text=${item.name}" alt="${item.name}" style="width:100%;height:100%;border-radius:4px;">
                        </div>
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">$${item.price.toFixed(2)}</div>
                            <div class="item-quantity">
                                <button class="qty-btn" onclick="updateQuantity(${index}, -1)">-</button>
                                <input type="number" value="${item.quantity}" min="1" style="width:50px;text-align:center;border:1px solid #ddd;">
                                <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
                            </div>
                            <div>Subtotal: $${itemTotal.toFixed(2)}</div>
                        </div>
                        <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            updateCartSummary(subtotal);
            updateCartCount();
            displayRecommendations();
        }
        
        function updateCartSummary(subtotal) {
            const shipping = subtotal > 0 ? 10 : 0;
            const tax = subtotal * 0.1;
            const total = subtotal + shipping + tax;
            
            document.getElementById('subtotal').textContent = '$' + subtotal.toFixed(2);
            document.getElementById('shipping').textContent = '$' + shipping.toFixed(2);
            document.getElementById('tax').textContent = '$' + tax.toFixed(2);
            document.getElementById('total').textContent = '$' + total.toFixed(2);
        }
        
        function removeFromCart(index) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
        }
        
        function updateQuantity(index, change) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart[index].quantity += change;
            if (cart[index].quantity < 1) cart[index].quantity = 1;
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
        }
        
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }
        
        function proceedToCheckout() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            window.location.href = 'checkout.html';
        }
        
        // Initialize
        loadCart();
        updateCartCount();
    </script>
</body>
</html>
