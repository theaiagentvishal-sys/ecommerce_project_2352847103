<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Premium Running Shoes - E-SHOP</title>
    <link rel="icon" type="image/png" href="public/images/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="public/bootstrap.css">
    <link rel="stylesheet" href="public/font-awesome.css">
    <link rel="stylesheet" href="public/fe/themify-icons.css">
    <link rel="stylesheet" href="public/fe/style.css">
    <style>
        .product-detail { padding: 40px 0; }
        .ai-recommendations { background: #f0f8ff; padding: 30px; border-radius: 8px; margin-top: 30px; border-left: 4px solid #F7941D; }
        .ai-recommendations h3 { margin-bottom: 20px; color: #333; }
        .ai-badge { background: #F7941D; color: #fff; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: 600; margin-left: 10px; }
        .rec-products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .rec-card { background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
        .rec-card-image { width: 100%; height: 150px; background: #f5f5f5; display: flex; align-items: center; justify-content: center; }
        .rec-card-content { padding: 15px; }
        .rec-card-name { font-weight: 600; font-size: 13px; margin-bottom: 8px; }
        .rec-card-price { color: #F7941D; font-weight: 600; margin-bottom: 5px; }
        .rec-card-reason { font-size: 11px; color: #666; font-style: italic; margin-bottom: 10px; }
        .btn-rec { background: #F7941D; color: #fff; border: none; padding: 8px 12px; border-radius: 3px; cursor: pointer; width: 100%; font-size: 12px; font-weight: 600; }
        .btn-rec:hover { background: #e68a1a; }

        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 50px; }
        .product-image { background: #f9f9f9; border-radius: 8px; overflow: hidden; }
        .product-image img { width: 100%; height: 500px; object-fit: cover; }
        .product-info { padding: 20px; }
        .product-title { font-size: 28px; font-weight: 700; margin-bottom: 10px; }
        .product-rating { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .stars { color: #FFC107; }
        .review-count { color: #999; }
        .product-price { font-size: 24px; font-weight: 700; color: #F7941D; margin-bottom: 20px; }
        .product-description { color: #666; line-height: 1.8; margin-bottom: 20px; }
        .product-options { margin-bottom: 20px; }
        .option-label { font-weight: 600; margin-bottom: 10px; display: block; }
        .option-input { display: flex; gap: 10px; margin-bottom: 20px; }
        .option-input button { padding: 8px 12px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; }
        .option-input button.active { background: #F7941D; color: #fff; }
        .quantity-selector { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .qty-btn { width: 40px; height: 40px; border: 1px solid #ddd; background: #fff; cursor: pointer; font-weight: 600; }
        .qty-input { width: 60px; text-align: center; padding: 8px; border: 1px solid #ddd; }
        .add-to-cart { background: #F7941D; color: #fff; padding: 12px 30px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; width: 100%; margin-bottom: 10px; }
        .add-to-cart:hover { background: #e68a1f; }
        .add-to-wishlist { background: #fff; color: #F7941D; padding: 12px 30px; border: 2px solid #F7941D; border-radius: 4px; cursor: pointer; font-weight: 600; width: 100%; }
        .product-details { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .details-tabs { display: flex; gap: 0; border-bottom: 2px solid #eee; margin-bottom: 20px; }
        .tab-btn { background: none; border: none; padding: 15px 20px; cursor: pointer; font-weight: 600; border-bottom: 3px solid transparent; }
        .tab-btn.active { color: #F7941D; border-bottom-color: #F7941D; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .reviews-section { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .review-item { background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #F7941D; }
        .review-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .reviewer-name { font-weight: 600; }
        .reviewer-rating { color: #FFC107; }
        .reviewer-date { color: #999; font-size: 12px; }
        .review-text { color: #666; line-height: 1.6; margin: 10px 0; }
        .review-helpful { display: flex; gap: 20px; color: #999; font-size: 12px; }
        .review-helpful a { cursor: pointer; text-decoration: none; }
        .reply-section { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd; margin-left: 30px; }
        .reply-item { background: #fff; padding: 15px; border-radius: 4px; margin-bottom: 10px; border-left: 4px solid #999; }
        .reply-badge { background: #333; color: #fff; padding: 2px 8px; border-radius: 3px; font-size: 11px; margin-left: 5px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        .form-group textarea { min-height: 120px; }
        .rating-selector { display: flex; gap: 10px; font-size: 24px; }
        .rating-selector span { cursor: pointer; color: #ddd; }
        .rating-selector span.active { color: #FFC107; }
        @media (max-width: 768px) {
            .product-grid { grid-template-columns: 1fr; }
            .details-tabs { flex-wrap: wrap; }
        }
    </style>
</head>
<body>
    <header class="header shop">
        <div class="topbar">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6"><div class="left-content"><ul class="list-main"><li><i class="ti-location-pin"></i> <span>London Oxford Street, UK</span></li></ul></div></div>
                    <div class="col-lg-6"><div class="right-content"><ul class="list-main"><li><a href="track-order.html">Track Order</a></li><li><a href="login.html">Login</a> / <a href="register.html">Register</a></li></ul></div></div>
                </div>
            </div>
        </div>
        <div class="middle-inner">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2"><div class="logo"><a href="index.html"><img src="public/images/logo.jpg" alt="logo"></a></div></div>
                    <div class="col-lg-8"><div class="search-bar-top"><div class="search-bar"><form><input placeholder="Search..." type="search"><button class="btnn"><i class="ti-search"></i></button></form></div></div></div>
                    <div class="col-lg-2"><div class="right-bar"><div class="sinlge-bar shopping"><a href="wishlist.html"><i class="fa fa-heart-o"></i> <span class="total-count">0</span></a></div><div class="sinlge-bar shopping"><a href="cart.html"><i class="ti-bag"></i> <span class="total-count">0</span></a></div></div></div>
                </div>
            </div>
        </div>
        <div class="header-inner">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12"><div class="menu-area"><nav class="navbar navbar-expand-lg"><div class="navbar-collapse"><ul class="nav main-menu navbar-nav"><li><a href="index.html">Home</a></li><li><a href="products.html">Products</a></li><li><a href="blog.html">Blog</a></li><li><a href="contact.html">Contact</a></li><li><a href="admin-dashboard.html">Admin</a></li></ul></div></nav></div></div>
                </div>
            </div>
        </div>
    </header>

    <div class="product-detail">
        <div class="container">
            <div class="product-grid">
                <div>
                    <div class="product-image">
                        <img src="https://via.placeholder.com/500x500?text=Running+Shoes" alt="Premium Running Shoes">
                    </div>
                </div>

                <div>
                    <div class="product-info">
                        <h1 class="product-title">Premium Running Shoes</h1>
                        
                        <div class="product-rating">
                            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                            <span class="review-count">(128 reviews)</span>
                        </div>

                        <div class="product-price">$129.99</div>

                        <p class="product-description">
                            Experience ultimate comfort and performance with our Premium Running Shoes. 
                            Engineered with advanced cushioning technology and breathable mesh, these shoes 
                            are perfect for daily runs and intense workouts. The lightweight design and 
                            superior grip ensure optimal stability and control on any terrain.
                        </p>

                        <div class="product-options">
                            <label class="option-label">Select Color</label>
                            <div class="option-input">
                                <button class="active" style="background: #e74c3c; border-color: #e74c3c;"></button>
                                <button style="background: #000; border-color: #000;"></button>
                                <button style="background: #3498db; border-color: #3498db;"></button>
                                <button style="background: #2ecc71; border-color: #2ecc71;"></button>
                            </div>
                        </div>

                        <div class="product-options">
                            <label class="option-label">Select Size</label>
                            <div class="option-input">
                                <button>7</button>
                                <button>8</button>
                                <button class="active">9</button>
                                <button>10</button>
                                <button>11</button>
                                <button>12</button>
                                <button>13</button>
                            </div>
                        </div>

                        <div class="quantity-selector">
                            <label style="margin: 0; font-weight: 600;">Quantity:</label>
                            <button class="qty-btn" onclick="decreaseQty()">-</button>
                            <input type="number" id="quantity" class="qty-input" value="1" min="1">
                            <button class="qty-btn" onclick="increaseQty()">+</button>
                        </div>

                        <button class="add-to-cart" onclick="addToCart()">Add to Cart</button>
                        <button class="add-to-wishlist" onclick="addToWishlist()">‚ô• Add to Wishlist</button>

                        <div style="background: #f0f8ff; padding: 15px; border-radius: 4px; margin-top: 20px; border-left: 4px solid #0066cc;">
                            <p style="margin: 0; color: #666;">
                                <strong>‚úì Free Shipping</strong> on orders over $100<br>
                                <strong>‚úì 30-Day Returns</strong> - No questions asked<br>
                                <strong>‚úì 2-Year Warranty</strong> on all defects
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Details Tabs -->
            <div class="product-details">
                <div class="details-tabs">
                    <button class="tab-btn active" onclick="openTab(event, 'description')">Description</button>
                    <button class="tab-btn" onclick="openTab(event, 'specifications')">Specifications</button>
                    <button class="tab-btn" onclick="openTab(event, 'shipping')">Shipping Info</button>
                </div>

                <div id="description" class="tab-content active">
                    <h3>Product Description</h3>
                    <p>Our Premium Running Shoes are designed with runners of all levels in mind. Whether you're a marathon enthusiast or someone who enjoys casual jogging, these shoes deliver exceptional performance and comfort.</p>
                    <h4>Key Features:</h4>
                    <ul>
                        <li><strong>Advanced Cushioning:</strong> Responsive foam provides optimal shock absorption</li>
                        <li><strong>Breathable Mesh:</strong> Keeps your feet cool and dry during intense workouts</li>
                        <li><strong>Lightweight Design:</strong> Reduces foot fatigue for longer runs</li>
                        <li><strong>Superior Grip:</strong> Durable rubber outsole for traction on all surfaces</li>
                        <li><strong>Flexible Support:</strong> Engineered for natural foot movement</li>
                    </ul>
                </div>

                <div id="specifications" class="tab-content">
                    <h3>Specifications</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Brand</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">E-SHOP Premium</td></tr>
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Material</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">Mesh + Synthetic Upper</td></tr>
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Sole</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">Rubber</td></tr>
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Available Sizes</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">7-13</td></tr>
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Colors</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">Red, Black, Blue, Green</td></tr>
                        <tr><td style="padding: 10px; border-bottom: 1px solid #eee;"><strong>Weight</strong></td><td style="padding: 10px; border-bottom: 1px solid #eee;">Per shoe: 220g</td></tr>
                    </table>
                </div>

                <div id="shipping" class="tab-content">
                    <h3>Shipping Information</h3>
                    <p><strong>Standard Shipping:</strong> 5-7 business days - FREE for orders over $100</p>
                    <p><strong>Express Shipping:</strong> 2-3 business days - $9.99</p>
                    <p><strong>Overnight Delivery:</strong> Next business day - $19.99</p>
                    <p><strong>Returns:</strong> 30-day return policy. Items must be in original condition and packaging.</p>
                </div>
            </div>

            <!-- Reviews Section -->
            <div class="reviews-section" style="margin-top: 30px;">
                <h2 style="margin-bottom: 30px;">Customer Reviews (128)</h2>

                <!-- Review Items -->
                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-name">Sarah Johnson</div>
                            <div class="reviewer-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                            <div class="reviewer-date">Verified Purchase ‚Ä¢ 2 weeks ago</div>
                        </div>
                    </div>
                    <p style="font-weight: 600;">Best running shoes I've ever owned!</p>
                    <div class="review-text">
                        The comfort level is incredible. I've worn these for daily runs and even a half marathon, and they performed amazingly. The cushioning is perfect and they're very durable.
                    </div>
                    <div class="review-helpful">
                        <a onclick="toggleHelpful(this)">üëç Helpful (23)</a>
                        <a onclick="toggleUnhelpful(this)">üëé Unhelpful (1)</a>
                    </div>
                </div>

                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-name">Michael Chen</div>
                            <div class="reviewer-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                            <div class="reviewer-date">Verified Purchase ‚Ä¢ 1 month ago</div>
                        </div>
                    </div>
                    <p style="font-weight: 600;">Great shoes, sizing runs small</p>
                    <div class="review-text">
                        Excellent build quality and very comfortable. Only note is that the sizing seems to run small, so order a size up if possible. Once adjusted, they're fantastic!
                    </div>
                    <div class="review-helpful">
                        <a onclick="toggleHelpful(this)">üëç Helpful (15)</a>
                        <a onclick="toggleUnhelpful(this)">üëé Unhelpful (2)</a>
                    </div>
                    <div class="reply-section">
                        <div class="reply-item">
                            <div><strong>Admin <span class="reply-badge">Seller</span></strong> replied 1 month ago:</div>
                            <div style="margin-top: 8px; color: #666;">Thank you for the feedback! We appreciate you letting us know about the sizing. We'll update our size guide to help future customers.</div>
                        </div>
                    </div>
                </div>

                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-name">Emma Wilson</div>
                            <div class="reviewer-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                            <div class="reviewer-date">Verified Purchase ‚Ä¢ 1.5 months ago</div>
                        </div>
                    </div>
                    <p style="font-weight: 600;">Perfect for my training routine</p>
                    <div class="review-text">
                        I use these for both road and trail running. The support is amazing and they last a long time. Definitely recommend!
                    </div>
                    <div class="review-helpful">
                        <a onclick="toggleHelpful(this)">üëç Helpful (18)</a>
                        <a onclick="toggleUnhelpful(this)">üëé Unhelpful (0)</a>
                    </div>
                </div>

                <!-- Write a Review Form -->
                <div style="background: #f9f9f9; padding: 30px; border-radius: 8px; margin-top: 40px;">
                    <h3>Write a Review</h3>
                    <form onsubmit="submitReview(event)">
                        <div class="form-group">
                            <label>Your Rating</label>
                            <div class="rating-selector" id="ratingSelector">
                                <span onclick="setRating(1)">‚òÜ</span>
                                <span onclick="setRating(2)">‚òÜ</span>
                                <span onclick="setRating(3)">‚òÜ</span>
                                <span onclick="setRating(4)">‚òÜ</span>
                                <span onclick="setRating(5)">‚òÜ</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Review Title</label>
                            <input type="text" placeholder="Sum up your experience..." required>
                        </div>

                        <div class="form-group">
                            <label>Your Review</label>
                            <textarea placeholder="Share your experience with this product..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label>Your Name</label>
                            <input type="text" placeholder="Your name" required>
                        </div>

                        <div class="form-group">
                            <label>Your Email</label>
                            <input type="email" placeholder="your@email.com" required>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <input type="checkbox" required> I have read and agree to the <a href="#">review guidelines</a>
                        </div>

                        <button type="submit" class="add-to-cart" style="width: 100%;">Submit Review</button>
                    </form>
                </div>

                <!-- AI Recommendations Section -->
                <div class="ai-recommendations" id="aiRecSection" style="display:none;">
                    <h3><i class="fa fa-lightbulb-o"></i> AI-Recommended for You <span class="ai-badge">SMART</span></h3>
                    <div class="rec-products-grid" id="aiRecContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer-area footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6"><div class="single-footer"><h4>About</h4><p>Premium online shopping experience</p></div></div>
                    <div class="col-lg-3 col-md-6"><div class="single-footer links"><h4>Quick Links</h4><ul><li><a href="index.html">Home</a></li><li><a href="products.html">Products</a></li><li><a href="blog.html">Blog</a></li><li><a href="contact.html">Contact</a></li></ul></div></div>
                    <div class="col-lg-3 col-md-6"><div class="single-footer links"><h4>Support</h4><ul><li><a href="#">FAQ</a></li><li><a href="#">Returns</a></li><li><a href="#">Shipping</a></li></ul></div></div>
                    <div class="col-lg-3 col-md-6"><div class="single-footer"><h4>Contact</h4><ul><li>Email: info@eshop.com</li><li>Phone: +1-800-ESHOP</li></ul></div></div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function openTab(event, tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function increaseQty() { document.getElementById('quantity').value = parseInt(document.getElementById('quantity').value) + 1; }
        function decreaseQty() { if (parseInt(document.getElementById('quantity').value) > 1) document.getElementById('quantity').value = parseInt(document.getElementById('quantity').value) - 1; }

        function addToCart() {
            const qty = document.getElementById('quantity').value;
            alert('Added ' + qty + ' to cart!');
        }

        function addToWishlist() {
            alert('Added to wishlist!');
        }

        function toggleHelpful(el) { el.textContent = el.textContent.includes('23') ? 'üëç Helpful (24)' : 'üëç Helpful (23)'; }
        function toggleUnhelpful(el) { el.textContent = 'üëé Unhelpful'; }

        let selectedRating = 0;
        function setRating(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('#ratingSelector span');
            stars.forEach((star, index) => {
                star.textContent = index < rating ? '‚òÖ' : '‚òÜ';
            });
        }

        function submitReview(event) {
            event.preventDefault();
            if (selectedRating === 0) {
                alert('Please select a rating');
                return;
            }
            alert('Thank you for your review! It will appear after moderation.');
            event.target.reset();

        // AI Recommendation Database
        const allProducts = [
            { id: 1, name: 'Premium Running Shoes', price: 129.99, category: 'Sports', rating: 5, tags: ['shoes', 'running', 'sports'] },
            { id: 2, name: 'Athletic Socks Pack', price: 19.99, category: 'Sports', rating: 4.5, tags: ['socks', 'athletic', 'comfort'] },
            { id: 3, name: 'Sports Hydration Bottle', price: 34.99, category: 'Sports', rating: 5, tags: ['hydration', 'bottle', 'sports'] },
            { id: 4, name: 'Running Shorts Light', price: 49.99, category: 'Sports', rating: 4.5, tags: ['shorts', 'light', 'breathable'] },
            { id: 5, name: 'Winter Sports Jacket', price: 199.99, category: 'Winter', rating: 5, tags: ['jacket', 'winter', 'warm'] },
            { id: 6, name: 'Thermal Gloves', price: 29.99, category: 'Winter', rating: 4.5, tags: ['gloves', 'thermal', 'warm'] },
            { id: 7, name: 'Casual Sneakers', price: 89.99, category: 'Casual', rating: 4, tags: ['sneakers', 'casual', 'comfort'] },
            { id: 8, name: 'Sports Backpack', price: 79.99, category: 'Accessories', rating: 4.5, tags: ['backpack', 'sports', 'durable'] },
            { id: 9, name: 'Wireless Earbuds', price: 99.99, category: 'Electronics', rating: 5, tags: ['earbuds', 'wireless', 'audio'] },
            { id: 10, name: 'Fitness Tracker Watch', price: 149.99, category: 'Electronics', rating: 4.5, tags: ['watch', 'fitness', 'tracking'] },
            { id: 11, name: 'Yoga Mat Premium', price: 59.99, category: 'Sports', rating: 5, tags: ['yoga', 'mat', 'fitness'] },
            { id: 12, name: 'Protein Shaker Bottle', price: 24.99, category: 'Sports', rating: 4.5, tags: ['shaker', 'protein', 'bottle'] }
        ];

        // Complementary Products Mapping
        const complementary = {
            'Premium Running Shoes': ['Athletic Socks Pack', 'Sports Hydration Bottle', 'Running Shorts Light'],
            'Winter Sports Jacket': ['Thermal Gloves', 'Running Shorts Light'],
            'Sports Backpack': ['Wireless Earbuds', 'Fitness Tracker Watch'],
            'Yoga Mat Premium': ['Protein Shaker Bottle', 'Wireless Earbuds']
        };

        // Core AI Recommendation Function
        function getProductRecommendations(currentProductName, cartItems = []) {
            const recommendations = [];
            const addedProductIds = new Set(cartItems.map(item => item.id || 0));
            
            // Filter products: exclude current product and items already in cart
            const availableProducts = allProducts.filter(p => 
                p.name !== currentProductName && !addedProductIds.has(p.id)
            );

            // Get current product for category and complementary matching
            const currentProduct = allProducts.find(p => p.name === currentProductName);
            if (!currentProduct) return [];

            // 1. Find complementary products
            const complementaryProducts = complementary[currentProductName] || [];
            availableProducts.forEach(product => {
                if (complementaryProducts.includes(product.name)) {
                    recommendations.push({
                        ...product,
                        reason: `Pairs perfectly with ${currentProductName}`,
                        score: 95
                    });
                }
            });

            // 2. Category-based recommendations (same category but different product)
            availableProducts.forEach(product => {
                if (product.category === currentProduct.category && 
                    !recommendations.some(r => r.id === product.id)) {
                    recommendations.push({
                        ...product,
                        reason: `Similar to ${currentProductName}`,
                        score: 80
                    });
                }
            });

            // 3. Trending products (5-star ratings)
            availableProducts.forEach(product => {
                if (product.rating === 5 && !recommendations.some(r => r.id === product.id)) {
                    recommendations.push({
                        ...product,
                        reason: '‚≠ê Best Seller',
                        score: 70
                    });
                }
            });

            // Sort by score and return top 4
            return recommendations
                .sort((a, b) => b.score - a.score)
                .slice(0, 4);
        }

        // Display Recommendations on Product Detail Page
        function displayProductRecommendations() {
            const productName = document.querySelector('h1')?.textContent.trim() || 'Premium Running Shoes';
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            const recommendations = getProductRecommendations(productName, cart);
            const recSection = document.getElementById('aiRecSection');
            const recContainer = document.getElementById('aiRecContainer');
            
            if (!recContainer) return;
            
            if (recommendations.length > 0) {
                recSection.style.display = 'block';
                recContainer.innerHTML = '';
                
                recommendations.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'rec-card';
                    productCard.innerHTML = `
                        <img src="https://via.placeholder.com/150?text=${encodeURIComponent(product.name)}" alt="${product.name}" class="rec-card-image">
                        <div class="rec-card-content">
                            <p class="rec-card-name">${product.name}</p>
                            <p class="rec-card-reason">${product.reason}</p>
                            <p class="rec-card-price">$${product.price.toFixed(2)}</p>
                            <button class="btn-rec" onclick="addRecProductToCart('${product.name}', ${product.price}, '${product.category}')">Add to Cart</button>
                        </div>
                    `;
                    recContainer.appendChild(productCard);
                });
            } else {
                recSection.style.display = 'none';
            }
        }

        // Add Recommended Product to Cart
        function addRecProductToCart(name, price, category) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItem = cart.find(item => item.name === name);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: Math.random(),
                    name: name,
                    price: price,
                    category: category,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`Added ${name} to cart!`);
            displayProductRecommendations(); // Refresh recommendations
        }

        // Initialize recommendations on page load
        document.addEventListener('DOMContentLoaded', displayProductRecommendations);
            setRating(0);
        }
    </script>
</body>
</html>
